<script>
function trace() {
	// read & clean user input
	var s0_type = document.getElementById("s0-type").value;
	var s0_value = document.getElementById("s0-value").value;
	var s0 = cast(s0_type, s0_value);

	var expected_type = document.getElementById("expected-type").value;
	var expected_value = document.getElementById("expected-value").value;
	var expected = cast(expected_type, expected_value);


	// do the logic
	var s1;
	try {
		s1 = s0.charAt(2);
	} catch(err) {
		throw(err);
	};

	var sf;
	try {
		sf = s1 + "ee";
	} catch(err) {
		throw(err);
	};

	// display to user
	var s0_display = document.getElementById("s0");
	s0_display.innerHTML = s0_type + ": " + s0_value;

	var s1_display = document.getElementById("s1");
	s1_display.innerHTML = typeof s1 + ": " + s1;

	var sf_display = document.getElementById("sf");
	sf_display.innerHTML = typeof sf + ": " + sf;

	console.assert(expected === sf, [{expected: expected}, {actual: sf}] );

};

function cast(type, value) {

	if (type == "Number") {
    	return Number(value);

    } else if (type == "String") {
    	return value;

    } else if (type == "Null") {
    	return null;

    } else if (type == "Boolean") {
    	// why is this not quite right?
    	return Boolean(value);

    };
    // functions return undefined by default
};
</script>

<style>
	body {
	  font-family: Helvetica;
	}

	td {
	  padding: 1em 1.5em;
	  text-align: center;
	  border: 1px solid black;
	}

	table {
	  border-collapse: collapse;
	}
</style>

<h2> input.charAt(2) + "ee" <h2>

Input:
<br>
	<input type="text" value="type" id="s0-type">
	<input type="text" value="value" id="s0-value">
<br>
Expected:
<br>
	<input type="text" value="type" id="expected-type">
	<input type="text" value="value" id="expected-value">


<table>
  <tr>
    <th>step</th>
    <th>state</th> 
    <th>operation</th>
  </tr>
  <tr>
    <td>initial state</td>
    <td id="s0"></td> 
    <td><button type="button" onclick="trace()">trace it</button></td>
  </tr>
  <tr>
    <td></td>
    <td></td> 
    <td id="o1">s0.charAt(2);</td>
  </tr>
  <tr>
    <td>state 1</td>
    <td id="s1"></td> 
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td> 
    <td id="o2">s1 + "ee"</td>
  </tr>
  <tr>
    <td>final state</td>
    <td id="sf"></td> 
    <td></td>
  </tr>
</table>


